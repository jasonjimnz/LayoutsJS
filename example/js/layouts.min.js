var lastScreen="";var layjsClassHide="layjsHide";var model;var view;var cont;var newlay;var layjsUrl="";var layouts=[];var layjs={init:function(){console.log("LayJS: Start");try{$(document).load(function(){console.log("LayJS: jQuery OK")});this.model.init();this.view.init();this.cont.init();this.cont.checkScreens()}catch(e){window.alert("No jQuery detected");console.log("LayJS: "+e.message)}},model:{init:function(){console.log("LayJS: Model OK");model=this},api:function(e,t,n,r){if(t.urlDestiny){if(e=="GET"||e=="get"){var i=$.ajax({type:e,url:layjsUrl+t.urlDestiny,contentType:"application/json",crossDomain:true,xhrFields:{withCredentials:true},beforeSend:function(e){if(t.basicAuth){e.setRequestHeader("Authorization","Basic "+btoa(t.basicAuth));try{t.beforeSendFunction}catch(n){console.log("Function not defined: "+n.message)}}},success:function(e){result=e;try{n(e)}catch(t){console.error(t.message+"- No success function defined")}},error:function(){try{r}catch(e){console.error(e.message+"- No error function defined")}}})}else if(e=="POST"||e=="post"){if(t.json){var i=$.ajax({type:e,url:layjsUrl+urlDestiny,data:t.json,dataType:"json",contentType:"application/json",crossDomain:true,xhrFields:{withCredentials:true},beforeSend:function(e){if(t.basicAuth){e.setRequestHeader("Authorization","Basic "+btoa(t.basicAuth));try{t.beforeSendFunction}catch(n){console.log("Function not defined: "+n.message)}}},success:function(e){result=e;try{n(e)}catch(t){console.error(t.message+"- No success function defined")}},error:function(){try{r}catch(e){console.error(e.message+"- No error function defined")}}})}else{console.error("For POST Method json data is required")}}else if(e=="PUT"||e=="put"){if(t.json){var i=$.ajax({type:e,url:layjsUrl+urlDestiny,data:t.json,dataType:"json",contentType:"application/json",crossDomain:true,xhrFields:{withCredentials:true},beforeSend:function(e){if(t.basicAuth){e.setRequestHeader("Authorization","Basic "+btoa(t.basicAuth));try{t.beforeSendFunction}catch(n){console.log("Function not defined: "+n.message)}}},success:function(e){result=e;try{n(e)}catch(t){console.error(t.message+"- No success function defined")}},error:function(){try{r}catch(e){console.error(e.message+"- No error function defined")}}})}else{console.error("For POST Method json data is required")}}else if(e=="DELETE"||e=="delete"){var i=$.ajax({type:e,url:layjsUrl+urlDestiny,contentType:"application/json",crossDomain:true,xhrFields:{withCredentials:true},beforeSend:function(e){if(t.basicAuth){e.setRequestHeader("Authorization","Basic "+btoa(t.basicAuth));try{t.beforeSendFunction}catch(n){console.log("Function not defined: "+n.message)}}},success:function(e){result=e;try{n(e)}catch(t){console.error(t.message+"- No success function defined")}},error:function(){try{r}catch(e){console.error(e.message+"- No error function defined")}}})}else{console.error("Invalid API Method")}}else{console.error("The urlDestiny must be declared, if you will call the layjsUrl var without adding route, use an empty string")}}},view:{init:function(){console.log("LayJS: Views OK");view=this},change:function(e,t,n,r,i){if(e||e==null){if(e=="internal"){try{if(i){i}layjs.cont.change(t)}catch(s){console.log("Warning: "+s.message)}}else if(e=="external"){try{$(t).load(r);if(i){i}layjs.cont.change(t)}catch(s){console.log("Warning: "+s.message)}}else{console.log("typeScreen must be internal or external ")}}else{console.log("typeScreen must be declared or not null ")}try{callbackOK}catch(s){}}},cont:{init:function(){console.log("LayJS: Controller OK");cont=this;newlay=this.change},change:function(e){var t=layjs.cont.visible();$(e).removeAttr("style");if(t!=false||layouts.indexOf(e)>-1){if(t!=e){$(t).fadeOut("slow",function(){$(t).addClass(layjsClassHide);$(e).removeClass(layjsClassHide);if(t!=lastScreen){lastScreen=t}})}setTimeout(function(){$(t).removeAttr("style")})}else{console.log("LayJS: Error, bad syntax detected the origin or destiny does not exists")}},visible:function(){var e="";for(var t=0;t<layouts.length;t++){if($(layouts[t]).hasClass(layjsClassHide)==false){e=layouts[t];return e}}if(e==""){return false}},checkScreens:function(){$.each($(".layjs"),function(e,t){var n=$(t).attr("class").split(" ");layouts.push("."+n[1])});for(var e=0;e<layouts.length;e++){if(layouts[e].indexOf("home")==-1){$(layouts[e]).addClass("layjsHide")}else{}}}},success:function(e){try{e}catch(t){console.log("No callback defined")}},error:function(){return"Bad Call"}}